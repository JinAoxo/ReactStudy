<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="format-detection" content="telephone=no">
	<title>현재화면명 | 메뉴명 | 사이트명</title>

	<!-- JavaScript -->
	<script src="/resources/user/js/jquery-1.12.4.min.js"></script>

	<!-- <link href="https://vjs.zencdn.net/8.0.3/video-js.css" rel="stylesheet">
	<script src="https://vjs.zencdn.net/8.0.3/video.js"></script> -->

	<!-- 기본 셋팅이 좀 다름 -->
	<!-- <link href="https://vjs.zencdn.net/7.12.6/video-js.css" rel="stylesheet">
	<script src="https://vjs.zencdn.net/7.12.6/video.js"></script>
	<script src="https://vjs.zencdn.net/7.12.6/videojs-controls.js"></script> -->

	<link href="../node_modules/video.js/dist/video-js.css" rel="stylesheet">
	<script src="../node_modules/video.js/dist/video.js"></script>
	<!-- <script src="https://players.brightcove.net/videojs-quality-menu/1/videojs-quality-menu.min.js"></script> -->


	<link rel="stylesheet" href="/resources/user/css/content.css">

	<!-- 페이지 개별 스크립트 -->
	<script>
		$(document).ready(function () {
			// 1. 초기화 : var player = videojs("video-tag-id", options);
			// 2. sources : 경로 설정
			// 3. poster : 포스터 설정
			// 4. controls : 컨트롤바 제공 여부 - 기본적으로 재생/일시정지, 음량조절, 재생바, 남은 시간, 전체화면 버튼 등으로 구성
			// 5. playsinline : 모바일 브라우저 환경의 경우 동영상 재생 시 모바일 내장 플레이어로 실행이 되기 때문에 웹페이지에서 인라인형태로 제공하고 싶은 경우 true로 설정
			// 6. muted : 최초 무음 상태
			// 7. preload : 웹페이지 로드 시 source로 제공 된 동영상 경로를 재생 버튼을 클릭 시 영상을 다운로드 받는 지 재생 전에 미리 일부분을 다운로드 받아 로딩이 없이 제공받을 지 여부를 설정할 수 있습니다. "auto"의 경우 컨텐츠를 미리 로드하여 로딩이 없이 동영상을 시작
			// 8. playToggle(재생/일시정지), pictureInPictureToggle(pip모드), remainingTimeDisplay(남은 시간), progressControl(재생 바)

			var player = videojs('myPlayer', {
				controls: true,
				autoplay: true,
				// preload: 'auto',
				// width: 540,
				// height: 320,
				controlBar: {
					volumePanel: {
						inline: false,
						vertical: true
					},

					qualityMenuButton: {
						inline: false,
						title: "Quality"
					},

					qualitySelector: true,
					playToggle: {
						order: 0,
						align: 'center'
					},
					// customControlSpacer: {
					// 	order: 1
					// },
					// rewind: {
					// 	order: 2
					// },
					// forward: {
					// 	order: 3
					// },
					currentTimeDisplay: {},
					timeDivider: {},
					durationDisplay: {},
					progressControl: {},
					// volumeControl: {},
					fullscreenToggle: {},
					// qualityMenu: {
					// 	useResolutionLabels: true
					// }
				}
			});

			// player.hlsQualitySelector({
			// 	diplayCurrentQuality: true,
			// });

			// myPlayer.qualityMenu({
			// 	defaultResolution: '720p'
			// });

			// 아래 동작안함
			// var player = videojs('myPlayer');

			// player.ready(function () {
			// 	var qualitySelector = player.qualityLevels();

			// 	if (qualitySelector) {
			// 		var menuButton = player.controlBar.addChild('qualityMenuButton');

			// 		qualitySelector.on('addqualitylevel', function () {
			// 			menuButton.updateLabel();
			// 		});

			// 		qualitySelector.on('change', function () {
			// 			menuButton.updateLabel();
			// 		});
			// 	}
			// });

			// myPlayer.ready(function () {
			var backButton = $('<button class="vjs-back-button vjs-control vjs-button">Back</button>');
			var forwardButton = $('<button class="vjs-forward-button vjs-control vjs-button">Forward</button>');

			backButton.on("click", function () {
				player.currentTime(player.currentTime() - 5);
			});
			forwardButton.on("click", function () {
				player.currentTime(player.currentTime() + 5);
			});

			player.on('play', function () {
				$(".vjs-control-bar").append(backButton).append(forwardButton);
			});

			player.on('play', function () {
				$(backButton).css('display', 'block');
				$(forwardButton).css('display', 'block');
			});

			player.on('ended', function () {
				$(backButton).hide();
				$(forwardButton).hide();
			});

			var btnSetting = $('.video-setting .btn-setting');
			var btnQuality = $('.video-setting .setting-wrap button');
			btnSetting.click(function () {
				$('.setting-wrap').toggleClass('on');
			});
			btnQuality.click(function () {
				if ($('.setting-wrap').hasClass('on')) {
					$('.setting-wrap').removeClass('on');
				}
			});
		});
	</script>
</head>

<body>
	<div class="wrapper">
		<div id="container">
			<!-- 본문 영역 -->
			<div class="container">
				<h2 class="content-title">video js</h2>
				<div class="video-wrap">
					<div class="video-header">
						<strong class="title">hynn's Last Vlog 30 :: <span class="label-live">Live</span></strong>
						<div class="btn-group">
							<div class="video-setting">
								<button type="button" class="btn-setting">setting</button>
								<div class="setting-wrap">
									<ul>
										<li><button type="button">1080p<span class="label-hd">HD</span></button></li>
										<li><button type="button">720p<span class="label-hd">HD</span></button></li>
										<li><button type="button">540p</button></li>
										<li><button type="button">350p</button></li>
										<li><button type="button">270p</button></li>
										<li><button type="button">자동</button></li>
									</ul>
								</div>
							</div>
							<button class="btn-full">full</button>
							<button class="btn-close">X</button>
						</div>
					</div>
					<div class="video-body">

						<!-- 라이브 카운트다운 화면 -->
						<!-- <div class="live-countdown">
							<div class="time">01 : 12 : 32</div>
							<p>라이브가 곧 시작합니다.</p>
						</div> -->

						<!-- 준비중 화면  -->
						<!-- <div class="live-countdown">
							<div class="time">01 : 12 : 32</div>
							<p>라이브 상태를 확인하고 있습니다. 잠시만 기다려주세요.</p>
						</div> -->

						<video id="myPlayer" class="video-js vjs-fluid vjs-16-9" controls preload="auto">
							<source src="https://vjs.zencdn.net/v/oceans.mp4" type="video/mp4">
							<!-- <source src="https://vjs.zencdn.net/v/oceans.webm" type="video/webm"> -->
							<p class="vjs-no-js">
								To view this video please enable JavaScript, and consider upgrading to a web browser that
								<a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
							</p>
						</video>

						<!-- 
							1. id : <video>의 식별자 / 뒤에 video.js 스크립트에서 해당 태그를 컨트롤하기 위한 정보
							2. class : video-js vjs-default-skin 클래스를 적용하여 video.js가 제공하는 css를 적용 가능
							3. webkit-playsinline : 이 속성은 ios 웹뷰 환경에서 video플레이어를 웹뷰 인라인형태로 제공할 경우 설정하는 속성
							-
							1. 설정 video tag의 class => class="video-js" 
							2. 자동 설정 => data-setup='{}'
							2. 수동 설정 => videojs('my-player'); -> 호출하여 수정하여 사용	-> 사용시 videojs.getPlayer() , videojs.players
							4. 옵션 <video controls autoplay preload="auto" ...>
											<video data-setup='{"controls": true, "autoplay": false, "preload": "auto"}' ...>
									- 둘중 하나 선택 
												videojs('my-player', {
											controls: true,
											autoplay: false,
											preload: 'auto'
											});

							vjs-fluid : 크기 100% 화면

						-->

					</div>
				</div>
			</div>
			<!-- // 본문 영역 -->

		</div>
	</div>

</body>


</html>